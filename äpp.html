<!DOCTYPE html>
<html lang="et">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koodiracer - mäng</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto+Mono:wght@400;700&display=swap"
      rel="stylesheet">
    <link rel="stylesheet" href="stiil.css">
    <link rel="stylesheet" href="äpp.css">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="logo" aria-hidden="true">
          <a href="index.html">
            <img src="logo.svg" alt="Koodiraceri logo" width="58" height="58">
          </a>
        </div>

        <nav class="top-nav" aria-label="Peamenüü">
          <a href="info.html">Mis on koodiracer?</a>
          <a href="äpp.html" class="btn-primary">Alusta trükkimist</a>
          <a href="statistika.html">Info</a>
        </nav>
      </div>
    </header>

    <main>
      <div class="container">
        <section class="game">
          <!-- mängu tekstiala koos rea numbritega -->
          <div class="editor-container">
            <div class="line-numbers" id="lineNumbers">1</div>
            <div id="textDisplay" class="text-display" aria-live="polite"></div>
          </div>

          <textarea id="hiddenInput" rows="1" autofocus autocomplete="off"
            autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
            
          <div class="stats">
            <span id="wpm">0 WPM</span> ·
            <span id="accuracy">100% täpsus</span> ·
            <span id="errors">0 viga</span>
          </div>
          <button id="restartBtn" class="btn-ghost">Taaskäivita</button>
        </section>
      </div>

      <footer class="site-footer">
        <div class="container footer-inner">
          <p>© <span id="year">2025</span> Koodiracer. Kõik õigused kaitstud.</p>
          <p class="small-links">
            <a href="#">Privaatsus</a> · <a href="#">Kasutustingimused</a>
          </p>
        </div>
      </footer>

      <script src="äpp.js"></script>
      <script>
        // Reanumbrite dünaamiline uuendamine
        const textDisplay = document.getElementById("textDisplay");
        const lineNumbers = document.getElementById("lineNumbers");

        function updateLineNumbers() {
          const lines = textDisplay.textContent.split("\n").length || 1;
          let html = "";
          for (let i = 1; i <= lines; i++) html += i + "\n";
          lineNumbers.textContent = html;
        }

        const observer = new MutationObserver(updateLineNumbers);
        observer.observe(textDisplay, { childList: true, subtree: true, characterData: true });
        updateLineNumbers();
      </script>
    </body>
</html>
